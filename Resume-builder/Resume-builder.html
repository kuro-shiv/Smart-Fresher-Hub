<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume Builder | Smart Fresher Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <h1>Smart Fresher Resume Builder</h1>
    <ul>
      <li><a href="https://smart-fresher-sa.great-site.net/?i=2">üè† Home</a></li>
      <li><a href="Resume-Builder.html" class="active">üßæ Resume Builder</a></li>
      <li><a href="about.html">‚ÑπÔ∏è About</a></li>
    </ul>
  </nav>

  <div class="container">
    <section>
      <h2>Build Your ATS-Friendly Resume</h2>
      <p>
        Enter your details below. All fields are optional. Add multiple entries for sections like education, experience, projects, certifications, achievements, hobbies, and languages. You can also add custom sections. Sections will only appear in your resume if filled.
      </p>
      <form id="resumeForm">
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input type="text" id="fullName" name="fullName" placeholder="Your Name">
        </div>
        <div class="form-group">
          <label for="address">Address</label>
          <input type="text" id="address" name="address" placeholder="Your Address">
        </div>
        <div class="form-group" id="phoneNumbers">
          <label>Phone Numbers</label>
          <input type="text" name="phone[]" placeholder="Phone Number">
        </div>
        <button type="button" id="addPhoneBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Phone Number</button>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" placeholder="your@email.com">
        </div>
        <div class="form-group" id="urlBlocks">
          <label>URLs (Portfolio, Blog, etc.)</label>
          <input type="text" name="url[]" placeholder="URL (e.g., Portfolio, Blog)">
        </div>
        <button type="button" id="addUrlBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add URL</button>
        <div class="form-group">
          <label for="objective">Career Objective</label>
          <textarea id="objective" name="objective" rows="2" placeholder="Brief career goal or what you‚Äôre seeking"></textarea>
        </div>
        <div class="form-group" id="educationBlocks">
          <label>Education</label>
          <input type="text" name="degree[]" placeholder="Degree (e.g., B.Tech in IT)">
          <input type="text" name="institution[]" placeholder="Institution">
          <input type="text" name="duration[]" placeholder="Duration (e.g., 2021-2025)">
          <input type="text" name="cgpa[]" placeholder="CGPA/Percentage (optional)">
        </div>
        <button type="button" id="addEducationBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Education</button>
        <div class="form-group" id="experienceBlocks">
          <label>Work Experience / Internships</label>
          <input type="text" name="jobTitle[]" placeholder="Job Title">
          <input type="text" name="company[]" placeholder="Company Name">
          <input type="text" name="expDuration[]" placeholder="Duration (e.g., Jan 2023 ‚Äì May 2023)">
          <textarea name="responsibilities[]" rows="2" placeholder="Responsibilities (comma separated)"></textarea>
        </div>
        <button type="button" id="addExperienceBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Experience</button>
        <div class="form-group" id="projectBlocks">
          <label>Projects</label>
          <input type="text" name="projectName[]" placeholder="Project Name">
          <input type="text" name="techUsed[]" placeholder="Tech Used">
          <textarea name="projectDesc[]" rows="2" placeholder="Description (bullets, comma separated)"></textarea>
          <input type="text" name="projectLinks[]" placeholder="GitHub/Live Demo URL">
        </div>
        <button type="button" id="addProjectBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Project</button>
        <div class="form-group" id="skillsBlocks">
          <label>Skills</label>
          <input type="text" name="programmingLanguages" placeholder="Technical skills (e.g., Python, JavaScript)">
          <input type="text" name="toolsFrameworks" placeholder="Soft skills (e.g., Communication, Leadership)">
          <input type="text" name="otherSkills" placeholder="Skills (for medical, or other fields">
        </div>
        <div class="form-group" id="certBlocks">
          <label>Certifications</label>
          <input type="text" name="certName[]" placeholder="Certification Name">
          <input type="text" name="certAuthority[]" placeholder="Issuing Authority">
          <input type="text" name="certYear[]" placeholder="Year">
        </div>
        <button type="button" id="addCertBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Certification</button>
        <div class="form-group" id="achieveBlocks">
          <label>Achievements</label>
          <input type="text" name="achievement[]" placeholder="Achievement">
        </div>
        <button type="button" id="addAchieveBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Achievement</button>
        <div class="form-group" id="hobbyBlocks">
          <label>Hobbies</label>
          <input type="text" name="hobby[]" placeholder="Hobby (e.g., Blogging)">
        </div>
        <button type="button" id="addHobbyBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Hobby</button>
        <div class="form-group" id="langBlocks">
          <label>Languages</label>
          <input type="text" name="language[]" placeholder="Language (e.g., English)">
          <input type="text" name="proficiency[]" placeholder="Proficiency (e.g., Fluent)">
        </div>
        <button type="button" id="addLangBtn" style="margin-bottom:1rem; background:#90e0ef; color:#0077b6;">+ Add Language</button>
        <div class="form-group" id="customSectionBlocks"></div>
        <button type="button" id="addCustomSectionBtn" style="margin-bottom:1rem; background:#ffd166; color:#0077b6;">+ Add Custom Section</button>
        <button type="submit">Generate Resume</button>
        <button type="button" id="downloadBtn" style="background:#00b4d8;">Download as PDF</button>
      </form>
      <div id="resumeResult"></div>
    </section>
  </div>
  <footer>
    <p>Contact: <a href="mailto: smartfresherhubsa@gmail.com" style="color:#0077b6;">smartfresherhubsa@gmail.com</a> | Phone: +91-8299142475 ¬© 2025 Smart Fresher Hub | Build your career with confidence.</p>
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // REMOVE these lines, they cause errors and leak sensitive info
      // console.log("SMTP Email:", SMTP_EMAIL);
      // console.log("SMTP Password:", SMTP_PASS);
      // console.log("To:", email);

      // Add dynamic blocks for repeated sections
      function addBlock(containerId, html) {
        document.getElementById(containerId).insertAdjacentHTML('beforeend', html);
      }
      document.getElementById('addPhoneBtn').onclick = () => addBlock('phoneNumbers', <input type="text" name="phone[]" placeholder="Additional Phone Number">);
      document.getElementById('addEducationBtn').onclick = () => addBlock('educationBlocks', 
        <hr>
        <input type="text" name="degree[]" placeholder="Degree (e.g., B.Tech in IT)">
        <input type="text" name="institution[]" placeholder="Institution">
        <input type="text" name="duration[]" placeholder="Duration (e.g., 2021-2025)">
        <input type="text" name="cgpa[]" placeholder="CGPA/Percentage (optional)">
      );
      document.getElementById('addExperienceBtn').onclick = () => addBlock('experienceBlocks', 
        <hr>
        <input type="text" name="jobTitle[]" placeholder="Job Title">
        <input type="text" name="company[]" placeholder="Company Name">
        <input type="text" name="expDuration[]" placeholder="Duration (e.g., Jan 2023 ‚Äì May 2023)">
        <textarea name="responsibilities[]" rows="2" placeholder="Responsibilities (comma separated)"></textarea>
      );
      document.getElementById('addProjectBtn').onclick = () => addBlock('projectBlocks', 
        <hr>
        <input type="text" name="projectName[]" placeholder="Project Name">
        <input type="text" name="techUsed[]" placeholder="Tech Used">
        <textarea name="projectDesc[]" rows="2" placeholder="Description (bullets, comma separated)"></textarea>
        <input type="text" name="projectLinks[]" placeholder="GitHub/Live Demo URL">
      );
      document.getElementById('addCertBtn').onclick = () => addBlock('certBlocks', 
        <hr>
        <input type="text" name="certName[]" placeholder="Certification Name">
        <input type="text" name="certAuthority[]" placeholder="Issuing Authority">
        <input type="text" name="certYear[]" placeholder="Year">
      );
      document.getElementById('addAchieveBtn').onclick = () => addBlock('achieveBlocks', <input type="text" name="achievement[]" placeholder="Achievement">);
      document.getElementById('addHobbyBtn').onclick = () => addBlock('hobbyBlocks', <input type="text" name="hobby[]" placeholder="Hobby (e.g., Blogging)">);
      document.getElementById('addLangBtn').onclick = () => addBlock('langBlocks', 
        <hr>
        <input type="text" name="language[]" placeholder="Language (e.g., English)">
        <input type="text" name="proficiency[]" placeholder="Proficiency (e.g., Fluent)">
      );
      document.getElementById('addUrlBtn').onclick = () => addBlock('urlBlocks', <input type="text" name="url[]" placeholder="Additional URL (e.g., Portfolio, Blog)">);
      document.getElementById('addCustomSectionBtn').onclick = () => addBlock('customSectionBlocks', 
        <hr>
        <input type="text" name="customSectionTitle[]" placeholder="Section Title (e.g., Volunteering)">
        <textarea name="customSectionContent[]" rows="2" placeholder="Section Content"></textarea>
      );

      document.getElementById('resumeForm').addEventListener('submit', function(e) {
        e.preventDefault();

        // Collect form data
        const formData = new FormData(this);
        // Convert FormData to URLSearchParams for easier POST
        const params = new URLSearchParams();
        for (const pair of formData.entries()) {
          params.append(pair[0], pair[1]);
        }

        // Send to Google Sheet via Apps Script
        fetch('https://script.google.com/macros/s/AKfycbzjxTnCgGBOBp-4viqtzvCbunJ-fWL6jhVEuGip--ATbIfI9VJB83Htiy8_36YW_pkDSg/exec', {
          method: 'POST',
          body: params
        })
        .then(response => response.text())
        .then(result => {
          // No alert here
          // Optionally, generate the resume here as before
        })
        .catch(error => {
          alert('Error sending data to Google Sheet.');
          console.error(error);
        });

        // Helper to get all values for repeated fields
        const getVals = name => Array.from(document.getElementsByName(name)).map(i => i.value).filter(v => v);
        const fullName = document.getElementById('fullName').value;
        const address = document.getElementById('address').value;
        const phones = getVals('phone[]');
        const email = document.getElementById('email').value;
        const urls = getVals('url[]');
        const objective = document.getElementById('objective').value;
        const degrees = getVals('degree[]');
        const institutions = getVals('institution[]');
        const durations = getVals('duration[]');
        const cgpas = getVals('cgpa[]');
        const jobTitles = getVals('jobTitle[]');
        const companies = getVals('company[]');
        const expDurations = getVals('expDuration[]');
        const responsibilities = getVals('responsibilities[]');
        const projectNames = getVals('projectName[]');
        const techUsed = getVals('techUsed[]');
        const projectDesc = getVals('projectDesc[]');
        const projectLinks = getVals('projectLinks[]');
        const programmingLanguages = document.getElementsByName('programmingLanguages')[0].value.split(',').map(s => s.trim()).filter(s => s);
        const toolsFrameworks = document.getElementsByName('toolsFrameworks')[0].value.split(',').map(s => s.trim()).filter(s => s);
        const otherSkills = document.getElementsByName('otherSkills')[0].value.split(',').map(s => s.trim()).filter(s => s);
        const certNames = getVals('certName[]');
        const certAuthorities = getVals('certAuthority[]');
        const certYears = getVals('certYear[]');
        const achievements = getVals('achievement[]');
        const hobbies = getVals('hobby[]');
        const languages = getVals('language[]');
        const proficiencies = getVals('proficiency[]');
        const customSectionTitles = getVals('customSectionTitle[]');
        const customSectionContents = getVals('customSectionContent[]');

        // Build resume HTML (sections only if filled)
        let html = <div id="resumeContent" style="background:#fff; border:1px solid #e3eafc; border-radius:10px; padding:1.5rem; max-width:800px; margin:auto; font-size:1rem;">;
        if (fullName) html += <h2 style="color:#0077b6; margin-bottom:0.2rem;">${fullName}</h2>;
        if (address) html += <div style="font-size:1rem; color:#222; margin-bottom:0.5rem;"><span>üè† ${address}</span></div>;
        if (phones.length || email || urls.length) {
          html += <div style="font-size:1rem; color:#222;">;
          if (phones.length) html += phones.map(p => <span>üìû ${p}</span>).join(' | ');
          if (email) html +=  | <span>‚úâÔ∏è ${email}</span>;
          if (urls.length) html += ' | ' + urls.map(u => <span>${u}</span>).join(' | ');
          html += </div>;
        }
        html += <hr style="margin:1rem 0; border:0; border-top:1px solid #e3eafc;">;
        if (objective) html += <h4 style="color:#0077b6; margin-top:1rem;">Career Objective</h4><p>${objective}</p>;
        if (degrees.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Education</h4>;
          degrees.forEach((deg, i) => {
            if (deg || institutions[i] || durations[i] || cgpas[i]) {
              html += <div style="margin-bottom:0.5rem;">
                ${deg ? <strong>${deg}</strong> : ''} 
                ${institutions[i] ? | ${institutions[i]} : ''} 
                ${durations[i] ? | ${durations[i]} : ''}
                ${cgpas[i] ? <br>CGPA/Percentage: ${cgpas[i]} : ''}
              </div>;
            }
          });
        }
        if (jobTitles.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Work Experience / Internships</h4>;
          jobTitles.forEach((jt, i) => {
            if (jt || companies[i] || expDurations[i] || responsibilities[i]) {
              html += <div style="margin-bottom:0.5rem;">
                ${jt ? <strong>${jt}</strong> : ''} 
                ${companies[i] ? | ${companies[i]} : ''} 
                ${expDurations[i] ? | ${expDurations[i]} : ''}
                ${responsibilities[i] ? <ul>${responsibilities[i].split(',').map(r => <li>${r.trim()}</li>).join('')}</ul> : ''}
              </div>;
            }
          });
        }
        if (projectNames.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Projects</h4>;
          projectNames.forEach((pn, i) => {
            if (pn || techUsed[i] || projectDesc[i] || projectLinks[i]) {
              html += <div style="margin-bottom:0.5rem;">
                ${pn ? <strong>${pn}</strong> : ''} 
                ${techUsed[i] ? | <span>${techUsed[i]}</span> : ''}
                ${projectDesc[i] ? <ul>${projectDesc[i].split(',').map(d => <li>${d.trim()}</li>).join('')}</ul> : ''}
                ${projectLinks[i] ? <a href="${projectLinks[i]}" target="_blank">${projectLinks[i]}</a> : ''}
              </div>;
            }
          });
        }
        if (programmingLanguages.length || toolsFrameworks.length || otherSkills.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Skills</h4><div>;
          if (programmingLanguages.length) html += <strong>Technical Skills:</strong> ${programmingLanguages.join(', ')}<br>;
          if (toolsFrameworks.length) html += <strong>Skill:</strong> ${toolsFrameworks.join(', ')}<br>;
          if (otherSkills.length) html += <strong></strong> ${otherSkills.join(', ')};
          html += </div>;
        }
        if (certNames.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Certifications</h4><ul>;
          certNames.forEach((cn, i) => {
            if (cn || certAuthorities[i] || certYears[i]) {
              html += <li>${cn ? cn : ''}${certAuthorities[i] ?  ‚Äì ${certAuthorities[i]} : ''}${certYears[i] ? ', ' + certYears[i] : ''}</li>;
            }
          });
          html += </ul>;
        }
        if (achievements.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Achievements</h4><ul>;
          achievements.forEach(a => { if (a) html += <li>${a}</li>; });
          html += </ul>;
        }
        if (hobbies.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Hobbies</h4><ul>;
          hobbies.forEach(h => { if (h) html += <li>${h}</li>; });
          html += </ul>;
        }
        if (languages.length) {
          html += <h4 style="color:#0077b6; margin-top:1rem;">Languages</h4><ul>;
          languages.forEach((l, i) => {
            if (l || proficiencies[i]) html += <li>${l ? l : ''}${proficiencies[i] ?  ‚Äì ${proficiencies[i]} : ''}</li>;
          });
          html += </ul>;
        }
        if (customSectionTitles.length) {
          customSectionTitles.forEach((title, i) => {
            if (title || customSectionContents[i]) {
              html += <h4 style="color:#0077b6; margin-top:1rem;">${title}</h4>;
              html += <p>${customSectionContents[i] ? customSectionContents[i].replace(/\n/g, '<br>') : ''}</p>;
            }
          });
        }
        html += </div>;
        document.getElementById('resumeResult').innerHTML = html;
        window.scrollTo({ top: document.getElementById('resumeResult').offsetTop, behavior: 'smooth' });
      });

      // Download as PDF (simple print dialog for ATS-friendly format)
      document.getElementById('downloadBtn').addEventListener('click', function() {
        const resumeContent = document.getElementById('resumeContent');
        if (resumeContent) {
          const printWindow = window.open('', '', 'width=800,height=900');
          printWindow.document.write(
            <html>
              <head>
                <title>Resume - Download</title>
                <style>
                  body { font-family: 'Poppins', Arial, sans-serif; background: #fff; color: #222; }
                  h2, h3, h4 { color: #0077b6; }
                  ul { columns:2; padding-left:1.5rem; }
                  hr { margin:1rem 0; border:0; border-top:1px solid #e3eafc; }
                  div { page-break-inside: avoid; }
                </style>
              </head>
              <body>${resumeContent.outerHTML}</body>
            </html>
          );
          printWindow.document.close();
          printWindow.focus();
          printWindow.print();
        } else {
          alert('Please generate your resume first.');
        }
      });
    });
  </script>
</body>
</html>
